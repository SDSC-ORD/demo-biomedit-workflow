{
  "@id": "${repository}/${manifest.version}/${runName}/log",
  "@context": {
      "owl": "owl:http://www.w3.org/2002/07/owl#",
      "prov": "http://www.w3.org/ns/prov#",
      "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
      "renku": "https://swissdatasciencecenter.github.io/renku-ontology/",
      "schema": "http://schema.org/",
      "xsd":  "http://www.w3.org/2001/XMLSchema#",
      "gh":   "https://github.com/",
      "repo":   "$repository",
      "@base":   "$repository/$manifest.version/"
  },
  "@graph": [
    {
      "@id": "repo:workflow_manager",
      "@type": "prov:Role" ,
      "rdfs:label": { "@value": "Workflow manager tool" }
    },
    {
      "@id": "https://nextflow.io/",
      "@type": [
        "prov:SoftwareAgent",
        "schema:SoftwareApplication"
      ],
      "schema:softwareVersion": { "@value": "${manifest.nextflowVersion}" } ,
      "rdfs:label": { "@value": "Nextflow" }
    },
    {
      "@id": "${runName}_workflow",
      "@type": "prov:Plan",
      "prov:hasLocation": { "@id": "${manifest.mainScript}" },
      "renku:command": { "@value": "${commandLine}" },
      "renku:hasInputs": { "@id": "${runName}_in" },
      "renku:hasOutputs": { "@id": "${runName}_out" },
      "renku:success_codes": { "@value": "${exitStatus}" }
    },
    {
      "@id": "${runName}_out",
      "@type": [
        "prov:Entity",
        "renku:commandOutput"
      ],
      "prov:atLocation": { "@id": "${params.output_dir}" },
      "prov:generatedAtTime": [
        {
          "@type": "xsd:dateTime",
          "@value": "2023-02-27T12:13:00+00:00"
        }
      ],
      "prov:wasDerivedFrom": { "@id": "${runName}_in" },
      "prov:wasGeneratedBy": { "@id": "${runName}" }
    },
    {
      "@id": "gh:${userName}",
      "@type": [
        "prov:Person",
        "schema:Person"
      ],
      "schema:identifier": { "@value": "${userName}" }
    },
    {
      "@id": "${params.input_dir}",
      "@type": "prov:Location"
    },
    {
      "@id": "${runName}",
      "@type": "prov:Activity",
      "prov:endedAtTime": [
        {
          "@type": "xsd:dateTime",
          "@value": "2023-02-27T12:13:00+00:00"
        }
      ],
      "prov:generated": { "@id": "${runName}_out" },
      "prov:qualifiedAssociation": { "@id": "${runName}_execution" },
      "prov:startedAtTime": [
        {
          "@type": "xsd:dateTime",
          "@value": "2023-02-27T12:00:00+00:00"
        }
      ],
      "prov:used": { "@id": "${runName}_in" },
      "prov:wasAssociatedWith": { "@id": "https://nextflow.io/" },
      "prov:wasAttributedTo": { "@id": "gh:${userName}" },
      "repo:exitCode": { "@value": 0 }
    },
    {
      "@id": "repo:exitCode",
      "@type": "owl:DatatypeProperty",
      "rdfs:comment": { "@value": "Exit code of a command denoting success or failure" },
      "rdfs:label": { "@value": "Exit code" },
      "rdfs:range": { "@id": "xsd:integer" }
    },
    {
      "@id": "${runName}_execution",
      "@type": [ "prov:Association" ],
      "prov:agent": { "@id": "https://nextflow.io/" },
      "prov:hadPlan": { "@id": "${runName}_workflow" },
      "prov:hadRole": { "@id": "repo:workflow_manager" }
    },
    {
      "@id": "${params.output_dir}",
      "@type": "prov:Location"
    },
    {
      "@id": "",
      "@type": [
        "schema:Project",
        "schema:SoftwareSourceCode"
      ],
      "schema:author": { "@id": "gh:${userName}" },
      "schema:name": { "@value": "${manifest.name}" },
      "schema:version": { "@value": "${manifest.version}" },
      "renku:hasActivity": { "@id": "${runName}" },
      "renku:hasPlan": { "@id": "${runName}_workflow" }
    },
    {
      "@id": "${runName}_in",
      "@type": [
        "prov:Entity",
        "renku:commandInput"
      ],
      "prov:atLocation": { "@id": "${params.input_dir}" }
    }
  ]
}